{"ast":null,"code":"var _jsxFileName = \"/home/shivendra/Desktop/techoffice/salamadmin/adminclient/src/createbusinesscategory/BusinessDataTable.js\";\nimport moment from 'moment'; // Example for onSort prop\n\nimport React, { Component } from 'react'; // Import React\n\nimport axios from 'axios';\nimport { Link, withRouter } from 'react-router-dom';\nimport Datatable from 'react-bs-datatable'; // Import this package\n\nimport swal from 'sweetalert';\nimport validator from 'validator';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nclass BusinessDataTable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      businessList: [],\n      modal: false // businesscategory : {value : '', isValidate : true , message :''},\n      // businesscategoryId : '',\n      // businesscategory : ''\n\n    };\n    this.fetchBusiness = this.fetchBusiness.bind(this);\n    this.toggle = this.toggle.bind(this); // this.handleBusinessCategoryChange = this.handleBusinessCategoryChange.bind(this);\n  }\n\n  toggle() {\n    this.setState({\n      modal: !this.state.modal\n    });\n  }\n\n  componentWillMount() {\n    this.fetchBusiness();\n  } // handleBusinessCategoryChange(event){\n  //   const {name, value} = event.target;\n  //   let state = this.state;\n  //   state[name].message = '';\n  //   state[name].value = value;\n  //   this.setState(state);\n  // }\n  // handleBusinessCategoryChange(event){\n  //   this.setState({\n  //     businesscategory : event.target.value\n  //   })\n  // }\n\n\n  validate() {\n    let state = this.state;\n\n    if (validator.isEmpty(state.businesscategory.value)) {\n      state.businesscategory.isValidate = false;\n      state.businesscategory.message = 'Please Fill The Businee Category';\n      this.setState(state);\n      return false;\n    }\n\n    if (!state.productName.value.match(/^[A-Za-z ]+$/)) {\n      state.productName.isValidate = false;\n      state.productName.message = \"Must Be Letters\";\n      this.setState(state);\n      return false;\n    }\n\n    return true;\n  }\n\n  fetchBusiness() {\n    axios.post('http://localhost:3300/api/fetchBusiness').then(response => {\n      console.log('HHHHHHHHHHHHHHHHH', response);\n      this.setState({\n        businessList: response.data.doc\n      });\n    });\n  } // editBusinessCategory (e) {\n  //   console.log('====================',e);\n  //   let that = this\n  //   axios.get('http://localhost:3300/api/editBusinessCategory/'+e)\n  //       .then(response => {\n  //         console.log('???????????????/',response.data.businesscategory);\n  //         this.setState({ \n  //          businessId : e,\n  //          businesscategory : response.data.businesscategory,  \n  //         });\n  //       }) \n  //       that.toggle()\n  // }\n\n\n  editBusinessCategory(e, i) {\n    console.log('WWWWWWWWWWWWWWWWWWWWWWWWWWWW', e.state.businessList[i]._id);\n    axios.post('http://localhost:3300/api/editBusiness', {\n      businessId: e.state.businessList[i]._id\n    }).then(response => {\n      if (response) {\n        this.props.authenticate({\n          type: 'authenticate',\n          payload: response.data\n        });\n      }\n\n      console.log('---------------------------', response);\n    }); //  this.props.history.replace('/Editproductpage');\n\n    this.toggle();\n  }\n\n  deleteBusinessCat(e) {\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover this imaginary file!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        axios.post('http://localhost:3300/api/deleteBusinessCategory', {\n          businessId: e\n        }).then(res => {\n          swal(\"Poof! Your imaginary file has been deleted!\", {\n            icon: \"success\"\n          });\n        });\n        setTimeout(function () {\n          return window.location = '/businesscategory';\n        }, 2000);\n      } else {\n        swal(\"Your imaginary file is safe!\");\n      }\n    });\n  }\n\n  render() {\n    // const state = this.state;\n    const header = [{\n      title: 'Category',\n      prop: 'category',\n      sortable: true,\n      filterable: true\n    }, {\n      title: 'Status',\n      prop: 'status',\n      sortable: true,\n      filterable: true\n    }, // { title: 'Name Uppercased', prop: 'realnameuppercase', cell: (row) => row.realname.toUpperCase() },\n    {\n      title: 'Action',\n      prop: 'action',\n      sortable: true,\n      filterable: true\n    }];\n    let state = this.state;\n    const body = [];\n    state.businessList.map((e, i) => {\n      body.push({\n        'category': e.businesscategory,\n        'status': React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"card-options\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"custom-switch m-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"checkbox\",\n          value: \"1\",\n          className: \"custom-switch-input\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: \"custom-switch-indicator\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        })))),\n        'action': React.createElement(\"div\", {\n          className: \"actiontrans\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, \" \", React.createElement(\"i\", {\n          onClick: this.toggle,\n          onClick: e => this.editBusinessCategory(this, i),\n          value: e._id,\n          className: \"fa fa-edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }), \" \"), React.createElement(Modal, {\n          isOpen: this.state.modal,\n          toggle: this.toggle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(ModalHeader, {\n          toggle: this.toggle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"Modal title\"), React.createElement(ModalBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, \"Business Category  \"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"businesscategory\",\n          value: this.state.businesscategory,\n          onChange: this.handleBusinessCategoryChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          style: {\n            marginTop: 10\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        })), React.createElement(ModalFooter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        })), React.createElement(Link, {\n          to: \"#\",\n          onClick: this.deleteBusinessCat.bind(this, e._id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, \" \", React.createElement(\"i\", {\n          className: \"fa fa-trash\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        })), \" \")\n      });\n    });\n    const onSortFunction = {\n      date(columnValue) {\n        // Convert the string date format to UTC timestamp\n        // So the table could sort it by number instead of by string\n        return moment(columnValue, 'Do MMMM YYYY').valueOf();\n      }\n\n    };\n    const customLabels = {\n      first: '<<',\n      last: '>>',\n      prev: '<',\n      next: '>',\n      show: 'Display',\n      entries: 'rows',\n      noResults: 'There is no data to be displayed'\n    }; // In your render method\n\n    return React.createElement(Datatable, {\n      tableHeader: header,\n      tableBody: body,\n      keyName: \"userTable\",\n      tableClass: \"striped hover responsive\",\n      rowsPerPage: 5,\n      rowsPerPageOption: [5, 10, 15, 20],\n      initialSort: {\n        prop: \"username\",\n        isAscending: true\n      },\n      onSort: onSortFunction,\n      labels: customLabels,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default BusinessDataTable;","map":{"version":3,"sources":["/home/shivendra/Desktop/techoffice/salamadmin/adminclient/src/createbusinesscategory/BusinessDataTable.js"],"names":["moment","React","Component","axios","Link","withRouter","Datatable","swal","validator","Modal","ModalHeader","ModalBody","ModalFooter","BusinessDataTable","constructor","props","state","businessList","modal","fetchBusiness","bind","toggle","setState","componentWillMount","validate","isEmpty","businesscategory","value","isValidate","message","productName","match","post","then","response","console","log","data","doc","editBusinessCategory","e","i","_id","businessId","authenticate","type","payload","deleteBusinessCat","title","text","icon","buttons","dangerMode","willDelete","res","setTimeout","window","location","render","header","prop","sortable","filterable","body","map","push","handleBusinessCategoryChange","marginTop","onSortFunction","date","columnValue","valueOf","customLabels","first","last","prev","next","show","entries","noResults","isAscending"],"mappings":"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","sourcesContent":["import moment from 'moment'; // Example for onSort prop\nimport React, { Component } from 'react'; // Import React\nimport axios from 'axios';\nimport {Link, withRouter} from 'react-router-dom';\nimport Datatable from 'react-bs-datatable'; // Import this package\nimport swal from 'sweetalert';\nimport validator from 'validator';\nimport {  Modal,ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n \nclass BusinessDataTable extends Component{ \n    constructor(props){\n        super(props);\n        this.state = {\n        businessList : [],    \n        modal : false,\n        // businesscategory : {value : '', isValidate : true , message :''},\n        // businesscategoryId : '',\n        // businesscategory : ''\n        }\n      this.fetchBusiness = this.fetchBusiness.bind(this);\n      this.toggle = this.toggle.bind(this);\n      // this.handleBusinessCategoryChange = this.handleBusinessCategoryChange.bind(this);\n      };\n    \n      toggle(){\n        this.setState({\n          modal : !this.state.modal\n        })\n      }\n      \n      componentWillMount(){\n        this.fetchBusiness();\n      }\n\n      // handleBusinessCategoryChange(event){\n      //   const {name, value} = event.target;\n      //   let state = this.state;\n      //   state[name].message = '';\n      //   state[name].value = value;\n      //   this.setState(state);\n      // }\n\n      // handleBusinessCategoryChange(event){\n      //   this.setState({\n      //     businesscategory : event.target.value\n      //   })\n      // }\n    \n      validate(){\n        let state = this.state;\n        if(validator.isEmpty(state.businesscategory.value)){\n          state.businesscategory.isValidate = false;\n          state.businesscategory.message = 'Please Fill The Businee Category';\n          this.setState(state);\n          return false;\n        }\n        if (!state.productName.value.match(/^[A-Za-z ]+$/)) {\n          state.productName.isValidate = false;\n          state.productName.message = \"Must Be Letters\";\n          this.setState(state);\n          return false;\n        }\n        return true;\n      }\n\n        fetchBusiness(){\n            axios.post('http://localhost:3300/api/fetchBusiness').then((response)=>{\n              console.log('HHHHHHHHHHHHHHHHH',response);\n              this.setState({\n                businessList : response.data.doc\n              })\n            })\n          }\n\n          // editBusinessCategory (e) {\n          //   console.log('====================',e);\n    \n          //   let that = this\n          //   axios.get('http://localhost:3300/api/editBusinessCategory/'+e)\n          //       .then(response => {\n          //         console.log('???????????????/',response.data.businesscategory);\n          //         this.setState({ \n          //          businessId : e,\n          //          businesscategory : response.data.businesscategory,  \n          //         });\n          //       }) \n    \n          //       that.toggle()\n          // }\n     \n\n          editBusinessCategory(e,i){\n            console.log('WWWWWWWWWWWWWWWWWWWWWWWWWWWW',e.state.businessList[i]._id);\n             axios.post('http://localhost:3300/api/editBusiness',{\n              businessId : e.state.businessList[i]._id\n             }).then((response)=>{\n               if(response){\n                 this.props.authenticate({\n                   type: 'authenticate',\n                   payload : response.data\n                 })\n               }\n              console.log('---------------------------',response);\n             })\n            //  this.props.history.replace('/Editproductpage');\n                this.toggle()\n           }\n\n          deleteBusinessCat(e){\n            swal({\n              title: \"Are you sure?\",\n              text: \"Once deleted, you will not be able to recover this imaginary file!\",\n              icon: \"warning\",\n              buttons: true,\n              dangerMode: true,\n            }).then((willDelete)=>{\n              if(willDelete){\n                axios.post('http://localhost:3300/api/deleteBusinessCategory',{\n                  businessId: e,\n                }).then(res=>{\n                  swal(\"Poof! Your imaginary file has been deleted!\",{\n                    icon:\"success\",\n                  });\n                })\n                setTimeout(function(){\n                  return window.location = '/businesscategory';\n                },2000)\n              }else{\n                swal(\"Your imaginary file is safe!\");\n              }\n            });\n           }\n\n\nrender(){\n  // const state = this.state;\nconst header = [\n  { title: 'Category', prop: 'category', sortable: true, filterable: true },\n  { title: 'Status', prop: 'status', sortable: true ,filterable: true},\n  // { title: 'Name Uppercased', prop: 'realnameuppercase', cell: (row) => row.realname.toUpperCase() },\n  { title: 'Action', prop: 'action'    ,sortable: true , filterable: true },\n  ];\n \nlet state = this.state;\nconst body = [];\n  state.businessList.map((e,i)=>{\n    body.push({\n     'category':e.businesscategory,\n     'status':      <td>\n     <div className=\"card-options\">\n         <label className=\"custom-switch m-0\">\n           <input type=\"checkbox\" value=\"1\" className=\"custom-switch-input\" />\n           <span className=\"custom-switch-indicator\"></span>\n         </label>\n       </div>\n     </td>,\n      'action': <div className=\"actiontrans\" > \n       {/* <Link to = \"#\"   > <i className=\"fa fa-edit\"></i></Link> */}\n       <Link to = \"#\" > <i onClick={this.toggle} onClick={(e)=> this.editBusinessCategory(this,i)} value = {e._id} className=\"fa fa-edit\"></i> </Link>\n       <Modal isOpen={this.state.modal} toggle={this.toggle} >\n          <ModalHeader toggle={this.toggle}>Modal title</ModalHeader>\n          <ModalBody>\n                <div className=\"form-group\">\n                <label>Business Category  </label>\n                <input type=\"text\" className=\"form-control\" name = \"businesscategory\" value = {this.state.businesscategory} onChange = {this.handleBusinessCategoryChange} />\n                </div> \n           <div style={{ marginTop: 10 }}>\n         \n        </div>\n        </ModalBody>\n          <ModalFooter>\n            \n          </ModalFooter>\n        </Modal>\n       <Link to = \"#\" onClick = {this.deleteBusinessCat.bind(this,e._id)}  > <i className=\"fa fa-trash\"></i></Link> </div>  });\n  })\n \nconst onSortFunction = {\n  date(columnValue) {\n    // Convert the string date format to UTC timestamp\n    // So the table could sort it by number instead of by string\n    return moment(columnValue, 'Do MMMM YYYY').valueOf();\n  },\n};\n \nconst customLabels = {\n  first: '<<',\n  last: '>>',\n  prev: '<',\n  next: '>',\n  show: 'Display',\n  entries: 'rows',\n  noResults: 'There is no data to be displayed',\n};\n \n// In your render method\nreturn(\n\n<Datatable\n  tableHeader={header}\n  tableBody={body}\n  keyName=\"userTable\"\n  tableClass=\"striped hover responsive\"\n  rowsPerPage={5}\n  rowsPerPageOption={[5, 10, 15, 20]}\n  initialSort={{prop: \"username\", isAscending: true}}\n  onSort={onSortFunction}\n  labels={customLabels}\n/>\n  )\n }\n}\n\n\n\nexport default BusinessDataTable;"]},"metadata":{},"sourceType":"module"}