{"ast":null,"code":"import _objectSpread from \"/home/shivendra/Desktop/techoffice/salamvendor/vendorclient/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport decode from 'jwt-decode';\nimport axios from 'axios';\nexport default class AuthService {\n  constructor(domain) {\n    this.domain = domain || 'http://localhost:3400'; //API Service\n\n    this.fetch = this.fetch.bind(this);\n    this.login = this.login.bind(this);\n    this.getProfile = this.getProfile.bind(this);\n  }\n\n  login(email, password) {\n    return this.fetch(\"\".concat(this.domain), {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(res => {\n      this.setToken(res.token); // Setting the token in localStorage\n\n      return Promise.resolve(res);\n    });\n  }\n\n  async loggedIn() {\n    const token = this.getToken(); //Getting Token From LocalStorage\n\n    if (token !== null && token !== undefined && token !== '') {\n      var obj = {};\n      obj.token = token;\n      var a = await axios.post('http://localhost:3400/api/getData', obj).then(res => {\n        if (res.data.status == true) {\n          return true;\n        } else if (res.data.status == false) {\n          return false;\n        }\n      });\n      return a;\n    }\n  }\n\n  setToken(idToken) {\n    //Save User token to Localstorage\n    localStorage.setItem('jwtToken', idToken);\n  }\n\n  getToken() {\n    // Retrieves the user token from localStorage\n    return localStorage.getItem('jwtToken');\n  }\n\n  logout() {\n    localStorage.removeItem('jwtToken');\n  }\n\n  getProfile() {\n    return decode(this.getToken());\n  }\n\n  fetch(url, options) {\n    const headers = {\n      'Accept': 'application/json',\n      'Content_type': 'application/json'\n    };\n\n    if (this.loggedIn()) {\n      headers['Authorization'] = 'Bearer' + this.getToken();\n    }\n\n    return fetch(url, _objectSpread({\n      headers\n    }, options)).then(this._checkStatus).then(responsse => responsse.json());\n  }\n\n  _checkStatus(response) {\n    // raises an error in case response status is not a success\n    if (response.status >= 200 && response.status < 300) {\n      // Success status lies between 200 to 300\n      return response;\n    } else {\n      var error = new Error(response.statusText);\n      error.response = response;\n      throw error;\n    }\n  }\n\n}","map":{"version":3,"sources":["/home/shivendra/Desktop/techoffice/salamvendor/vendorclient/src/Authentication/AuthService.js"],"names":["decode","axios","AuthService","constructor","domain","fetch","bind","login","getProfile","email","password","method","body","JSON","stringify","then","res","setToken","token","Promise","resolve","loggedIn","getToken","undefined","obj","a","post","data","status","idToken","localStorage","setItem","getItem","logout","removeItem","url","options","headers","_checkStatus","responsse","json","response","error","Error","statusText"],"mappings":"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","sourcesContent":["import decode from 'jwt-decode';\nimport axios from 'axios';\n\nexport default class AuthService {\n    constructor(domain){\n        this.domain = domain || 'http://localhost:3400' //API Service\n        this.fetch  = this.fetch.bind(this);\n        this.login  = this.login.bind(this);\n        this.getProfile = this.getProfile.bind(this); \n    }\n\n    login(email , password)  {\n        return this.fetch(`${this.domain}`,{\n           method: 'POST',\n           body : JSON.stringify({\n               email,\n               password\n           }) \n        }).then(res=>{\n            this.setToken(res.token) // Setting the token in localStorage\n            return Promise.resolve(res);\n        })\n    }\n\n   async loggedIn(){\n        const token = this.getToken() //Getting Token From LocalStorage\n        if(token!== null && token!==undefined && token!== ''){\n            var obj = {}\n            obj.token = token\n            var a = await axios.post('http://localhost:3400/api/getData',obj).then((res)=>{\n                if(res.data.status == true){\n                    return true;\n                }else if(res.data.status == false){\n                    return false;\n                }\n            })\n            return a;\n        }\n    }\n\n    setToken(idToken){\n        //Save User token to Localstorage\n        localStorage.setItem('jwtToken',idToken)\n    }\n\n    getToken(){\n      // Retrieves the user token from localStorage\n        return localStorage.getItem('jwtToken');\n    }\n\n    logout(){\n        localStorage.removeItem('jwtToken');\n    }\n\n    getProfile(){\n        return decode(this.getToken());\n    }\n\n    fetch(url, options){\n        const headers = {\n            'Accept' : 'application/json',\n            'Content_type' : 'application/json'\n        }\n        if(this.loggedIn()){\n            headers['Authorization']  = 'Bearer' + this.getToken()\n        }\n\n        return fetch (url,{\n            headers,\n            ...options\n        })\n\n        .then(this._checkStatus)\n        .then(responsse => responsse.json())\n    }\n\n    _checkStatus(response){\n          // raises an error in case response status is not a success\n          if (response.status >= 200 && response.status <300) { // Success status lies between 200 to 300\n            return response\n        } else {\n            var error = new Error(response.statusText)\n            error.response = response\n            throw error\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}